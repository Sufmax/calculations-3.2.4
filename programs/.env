# URL du serveur WebSocket
WS_URL=wss://blender-coordinator.louisgelas-gamer.workers.dev/ws/vm

# Mot de passe VM (sera automatiquement défini par set_id.py sur Binder)
VM_PASSWORD=

# Exécutable Blender (par défaut: 'blender' dans le PATH)
BLENDER_EXECUTABLE=blender

# Intervalle heartbeat en secondes (défaut: 3)
HEARTBEAT_INTERVAL=3

# Threads bake (Mantaflow OpenMP + Blender threads FIXED)
# Par défaut: cpu_count - 2
BAKE_THREADS=

# ─────────────────────────────────────────────
# PIPELINE BATCH (Bake → Compress → Upload)
# ─────────────────────────────────────────────

# Objectif : viser ~20 secondes d'upload par batch (adaptatif)
TARGET_UPLOAD_TIME=20.0

# Garde-fous batch adaptatif
MIN_BATCH_SIZE=5
MAX_BATCH_SIZE=50
DEFAULT_BATCH_SIZE=10

# Intervalle de collecte (secondes) côté compresseur
BATCH_INTERVAL=2.0

# ─────────────────────────────────────────────
# COMPRESSION ZSTD (avec dictionnaire optionnel)
# ─────────────────────────────────────────────

# Level 3 = bon ratio + rapide
ZSTD_LEVEL=3

# Taille dictionnaire (ex: 256KB)
ZSTD_DICT_SIZE=262144

# Nombre minimum d'échantillons pour entraîner le dictionnaire
ZSTD_MIN_TRAINING_SAMPLES=10

# ─────────────────────────────────────────────
# S3 MULTIPART (boto3)
# ─────────────────────────────────────────────

# Seuil multipart (5MB)
S3_MULTIPART_THRESHOLD=5242880

# Taille part multipart (5MB)
S3_MULTIPART_CHUNK_SIZE=5242880

# ─────────────────────────────────────────────
# PROGRESSION
# ─────────────────────────────────────────────

# Envoi état complet (PROGRESS_UPDATE) toutes les N secondes
PROGRESS_REPORT_INTERVAL=2.0

# ─────────────────────────────────────────────
# RECONNEXION
# ─────────────────────────────────────────────

MAX_RECONNECT_ATTEMPTS=10
RECONNECT_DELAY=5
